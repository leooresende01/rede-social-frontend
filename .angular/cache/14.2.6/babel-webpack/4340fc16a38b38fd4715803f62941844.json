{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { AtualizarUsuarioDto } from 'src/core/dto/atualizar-usuario.dto';\nimport { FormularioUtil } from 'src/core/util/formulario.util';\nimport { SeguidoresSeguindoUtil } from 'src/core/util/seguidores-seguindo.util';\nimport { urlApi } from 'src/core/util/url-api';\nimport { UsuarioUtil } from 'src/core/util/usuario.util';\nimport { Alert } from 'src/model/alert';\nimport { AlertType } from 'src/model/alert-type';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/core/service/usuario.service\";\nimport * as i4 from \"./../../../core/observable/alert.service\";\nimport * as i5 from \"src/core/service/login.service\";\nimport * as i6 from \"src/core/service/user-authenticate.service\";\nconst _c0 = [\"fotoInput\"];\nconst _c1 = [\"imagemElement\"];\nexport let EditUserComponent = /*#__PURE__*/(() => {\n  class EditUserComponent {\n    constructor(activateRoute, formBuilder, usuarioService, alertService, router, loginService, userAuthService) {\n      this.activateRoute = activateRoute;\n      this.formBuilder = formBuilder;\n      this.usuarioService = usuarioService;\n      this.alertService = alertService;\n      this.router = router;\n      this.loginService = loginService;\n      this.userAuthService = userAuthService;\n      this.urlApi = urlApi;\n    }\n\n    ngOnInit() {\n      this.usuarioSubscription = this.activateRoute.data.subscribe(data => this.usuario = data['usuario']);\n      this.formGroup = this.formBuilder.group({\n        nome: [this.usuario.nomeCompleto, [Validators.required, Validators.minLength(8), Validators.pattern(/^[a-zA-Z\\ ]+$/)]],\n        username: [this.usuario.username, [Validators.minLength(8), Validators.maxLength(20), Validators.pattern(/^[a-zA-Z0-9\\.]+$/), Validators.required]]\n      });\n    }\n\n    editarUsuario() {\n      const listaDeFiles = this.elementoInput.nativeElement.files;\n      const nomeCompleto = this.pegarValorDoInput('nome');\n      const username = this.pegarValorDoInput('username');\n      const imagemDoPerfil = listaDeFiles[0];\n      const atualizarUsuarioDto = new AtualizarUsuarioDto(username, nomeCompleto, imagemDoPerfil);\n      this.usuarioService.autalizarInformacoesUsuario(atualizarUsuarioDto).subscribe(usuarioAtualizado => this.atualizarInformacoesUsuario(usuarioAtualizado), err => this.mensagemErro = err.error.mensagem);\n    }\n\n    atualizarInformacoesUsuario(usuarioAtualizado) {\n      this.loginService.atualizarToken().subscribe(loginDto => {\n        this.alertService.nextValue(new Alert('Usuario atualizado com sucesso', AlertType.SUCCESS));\n        this.userAuthService.salvarLoginDto(loginDto);\n        this.router.navigate(['/home', usuarioAtualizado.username], {\n          replaceUrl: true\n        });\n      });\n    }\n\n    pegarValorDoInput(inputName) {\n      return this.formGroup.get(inputName)?.value;\n    }\n\n    carregarImagemProUsuario(event) {\n      FormularioUtil.mostrarImagem(event, this.elementoInput, this.imagemElementRef);\n    }\n\n    errorImage(event) {\n      UsuarioUtil.definirImagemDefault(event);\n    }\n\n    ngOnDestroy() {\n      SeguidoresSeguindoUtil.desativarObservable(this.usuarioSubscription);\n    }\n\n  }\n\n  EditUserComponent.ɵfac = function EditUserComponent_Factory(t) {\n    return new (t || EditUserComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.UsuarioService), i0.ɵɵdirectiveInject(i4.AlertService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i5.LoginService), i0.ɵɵdirectiveInject(i6.UserAuthenticateService));\n  };\n\n  EditUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EditUserComponent,\n    selectors: [[\"ng-component\"]],\n    viewQuery: function EditUserComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.elementoInput = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imagemElementRef = _t.first);\n      }\n    },\n    decls: 31,\n    vars: 8,\n    consts: [[1, \"espaco-lateral\"], [1, \"recentes\"], [1, \"card-editar-informacoes\"], [1, \"foto-space\"], [1, \"img-perfil\", \"clicavel\", 3, \"click\", \"error\"], [\"imagemElement\", \"\"], [1, \"usuario-info-space\"], [3, \"click\"], [3, \"formGroup\", \"submit\"], [1, \"mb-3\"], [\"for\", \"nomeCompleto\", 1, \"form-label\"], [\"formControlName\", \"nome\", \"type\", \"text\", \"id\", \"nomeCompleto\", \"aria-describedby\", \"emailHelp\", 1, \"form-control\"], [\"id\", \"emailHelp\", 1, \"form-text\"], [\"inputName\", \"nome\", 3, \"formGroup\"], [\"for\", \"username\", 1, \"form-label\"], [\"formControlName\", \"username\", \"type\", \"text\", \"id\", \"username\", \"aria-describedby\", \"emailHelp\", 1, \"form-control\"], [\"type\", \"file\", 1, \"remover-elemento\", 3, \"change\"], [\"fotoInput\", \"\"], [\"inputName\", \"username\", 3, \"formGroup\"], [1, \"invalid-feedback\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"]],\n    template: function EditUserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r2 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"Editar informacoes do usu\\u00E1rio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"img\", 4, 5);\n        i0.ɵɵlistener(\"click\", function EditUserComponent_Template_img_click_5_listener() {\n          i0.ɵɵrestoreView(_r2);\n\n          const _r1 = i0.ɵɵreference(25);\n\n          return i0.ɵɵresetView(_r1.click());\n        })(\"error\", function EditUserComponent_Template_img_error_5_listener($event) {\n          return ctx.errorImage($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6)(8, \"h3\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"p\", 7);\n        i0.ɵɵlistener(\"click\", function EditUserComponent_Template_p_click_10_listener() {\n          i0.ɵɵrestoreView(_r2);\n\n          const _r1 = i0.ɵɵreference(25);\n\n          return i0.ɵɵresetView(_r1.click());\n        });\n        i0.ɵɵtext(11, \"Alterar imagem do perfil\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"form\", 8);\n        i0.ɵɵlistener(\"submit\", function EditUserComponent_Template_form_submit_12_listener() {\n          return ctx.editarUsuario();\n        });\n        i0.ɵɵelementStart(13, \"div\", 9)(14, \"label\", 10);\n        i0.ɵɵtext(15, \"Nome completo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"input\", 11)(17, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"rs-index-signup-validators\", 13);\n        i0.ɵɵelementStart(19, \"div\", 9)(20, \"label\", 14);\n        i0.ɵɵtext(21, \"Nome de usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"input\", 15)(23, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"input\", 16, 17);\n        i0.ɵɵlistener(\"change\", function EditUserComponent_Template_input_change_24_listener($event) {\n          return ctx.carregarImagemProUsuario($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(26, \"rs-index-signup-validators\", 18);\n        i0.ɵɵelementStart(27, \"div\", 19);\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 20);\n        i0.ɵɵtext(30, \"Editar informa\\u00E7\\u00F5es\");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵattributeInterpolate2(\"src\", \"\", ctx.urlApi, \"/api/v1/usuarios/\", ctx.usuario.username, \"/imagemDoPerfil\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.usuario.username);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.mensagemErro);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", ctx.formGroup.invalid);\n      }\n    },\n    dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\".recentes[_ngcontent-%COMP%]{margin-bottom:15px;font-weight:500;font-size:22px}.espaco-lateral[_ngcontent-%COMP%]{padding:15px 20vw}.card-editar-informacoes[_ngcontent-%COMP%]{border:solid 1px var(--cor-de-fundo);border-radius:3px;background-color:#fff;padding:30px 30px 30px 40px;padding-right:20vw}.img-perfil[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50px;margin-bottom:20px}.form-label[_ngcontent-%COMP%]{font-weight:500;font-family:unset,sans-serif}.foto-space[_ngcontent-%COMP%]{display:flex;column-gap:30px}.usuario-info-space[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:5px}.usuario-info-space[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{font-weight:500;font-size:18px}.usuario-info-space[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#0095f6;cursor:pointer}@media screen and (max-width: 1024px){.espaco-lateral[_ngcontent-%COMP%]{padding:15px 15vw}}@media screen and (max-width: 780px){.espaco-lateral[_ngcontent-%COMP%]{padding:15px 8vw}}@media screen and (max-width: 500px){.espaco-lateral[_ngcontent-%COMP%]{padding:15px 2vw}.recentes[_ngcontent-%COMP%]{font-size:18px}}@media screen and (max-width: 390px){.espaco-lateral[_ngcontent-%COMP%]{padding:15px 2vw}.usuario-info-space[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:12px}.card-editar-informacoes[_ngcontent-%COMP%]{padding-right:10vw}}\"]\n  });\n  return EditUserComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}