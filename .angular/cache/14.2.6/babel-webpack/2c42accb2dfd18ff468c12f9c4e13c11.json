{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { NavigationEnd, NavigationStart, RouterEvent } from '@angular/router';\nimport { debounceTime, filter, of, pluck } from 'rxjs';\nimport { SeguidoresSeguindoUtil } from 'src/core/util/seguidores-seguindo.util';\nimport { urlApi } from 'src/core/util/url-api';\nimport { UsuarioUtil } from './../../../core/util/usuario.util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/core/service/user-authenticate.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"src/core/service/usuario.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./user-options/user-options.component\";\nimport * as i7 from \"../find-user/find-user.component\";\nimport * as i8 from \"../new-publicacao/new-publicacao.component\";\n\nfunction HeaderComponent_rs_home_finduser_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"rs-home-finduser\", 14);\n    i0.ɵɵpipe(1, \"async\");\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.formGroup)(\"usuariosConsulta\", i0.ɵɵpipeBind1(1, 2, ctx_r1.usuariosConsulta$));\n  }\n}\n\nfunction HeaderComponent_img_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n  }\n}\n\nfunction HeaderComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 16);\n  }\n}\n\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(activateRoute, router, userAuthService, formBuilder, usuarioService) {\n      this.activateRoute = activateRoute;\n      this.router = router;\n      this.userAuthService = userAuthService;\n      this.formBuilder = formBuilder;\n      this.usuarioService = usuarioService;\n      this.timeSleep = 500;\n      this.urlApi = urlApi;\n    }\n\n    ngOnInit() {\n      this.definirFormulario();\n      this.url = this.router.url;\n      this.observarConsultaDoUsuario();\n      this.observarNavegacoesDeRota();\n      this.usernameUsuarioAutenticado = this.userAuthService.pegarUsernameUsuarioAutenticado();\n    }\n\n    observarConsultaDoUsuario() {\n      this.consultaSubscription = this.formGroup.valueChanges.pipe(debounceTime(this.timeSleep)).pipe(pluck('query')).pipe(filter(username => {\n        if (username?.length && !/^\\s$/.test(username)) return true;\n        this.usuariosConsulta$ = of([]);\n        return false;\n      })).subscribe(username => this.usuariosConsulta$ = this.usuarioService.buscarUsuarioPorRegex(username));\n    }\n\n    observarNavegacoesDeRota() {\n      this.urlSubscription = this.router.events.pipe(filter(e => e instanceof RouterEvent && (e instanceof NavigationEnd || e instanceof NavigationStart))).subscribe(e => {\n        if (e instanceof NavigationEnd) {\n          this.url = this.router.url;\n        }\n\n        if (e instanceof NavigationStart && this.router.url === '/home/editarInformacoes') {\n          this.atualizarImagemDoUsuarioNoHeader();\n        }\n      });\n    }\n\n    definirFormulario() {\n      this.formGroup = this.formBuilder.group({\n        query: ['', Validators.required]\n      });\n    }\n\n    ngOnDestroy() {\n      SeguidoresSeguindoUtil.desativarObservable(this.consultaSubscription, this.urlSubscription);\n    }\n\n    ocultarMenuQuery() {\n      setTimeout(() => this.elementActive = false, 200);\n    }\n\n    errorImage(event) {\n      UsuarioUtil.definirImagemDefault(event);\n    }\n\n    atualizarImagemDoUsuarioNoHeader() {\n      const usernameUsuarioAutenticado = this.userAuthService.pegarUsernameUsuarioAutenticado();\n      this.usernameUsuarioAutenticado = '';\n      setTimeout(() => this.usernameUsuarioAutenticado = usernameUsuarioAutenticado, 200);\n    }\n\n  }\n\n  HeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n    return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserAuthenticateService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.UsuarioService));\n  };\n\n  HeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeaderComponent,\n    selectors: [[\"rs-home-header\"]],\n    decls: 18,\n    vars: 7,\n    consts: [[1, \"home-header\"], [1, \"header-espaco-interno\"], [1, \"header-espaco-interno\", \"find-user-field\"], [3, \"formGroup\"], [\"formControlName\", \"query\", \"placeholder\", \"Pesquisar usuarios\", \"type\", \"search\", 1, \"form-search\", 3, \"blur\", \"focus\"], [\"inputQueryUser\", \"\"], [3, \"formGroup\", \"usuariosConsulta\", 4, \"ngIf\"], [1, \"header-espaco-interno\", \"home-header-nav\"], [\"class\", \"icon-nav clicavel\", \"routerLink\", \"/home\", \"src\", \"https://cdn1.iconfinder.com/data/icons/material-core/20/home-256.png\", 4, \"ngIf\", \"ngIfElse\"], [\"imagemAlternativa\", \"\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#novaPublicacaoModal\", \"src\", \"https://cdn2.iconfinder.com/data/icons/boxicons-regular-vol-1/24/bx-add-to-queue-256.png\", 1, \"icon-nav\", \"clicavel\"], [1, \"dropdown-center\"], [\"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"img-perfil-link\", \"icon-nav\", \"clicavel\", 3, \"src\", \"error\"], [3, \"usernameUsuarioAutenticado\"], [3, \"formGroup\", \"usuariosConsulta\"], [\"routerLink\", \"/home\", \"src\", \"https://cdn1.iconfinder.com/data/icons/material-core/20/home-256.png\", 1, \"icon-nav\", \"clicavel\"], [\"routerLink\", \"/home\", \"src\", \"https://cdn2.iconfinder.com/data/icons/app-user-interface-6/48/Home_Alt-256.png\", 1, \"icon-nav\", \"clicavel\"]],\n    template: function HeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"header\")(1, \"div\", 0)(2, \"h1\", 1);\n        i0.ɵɵtext(3, \"Rede social\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"form\", 3)(6, \"input\", 4, 5);\n        i0.ɵɵlistener(\"blur\", function HeaderComponent_Template_input_blur_6_listener() {\n          return ctx.ocultarMenuQuery();\n        })(\"focus\", function HeaderComponent_Template_input_focus_6_listener() {\n          return ctx.elementActive = true;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(8, HeaderComponent_rs_home_finduser_8_Template, 2, 4, \"rs-home-finduser\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"nav\", 7);\n        i0.ɵɵtemplate(10, HeaderComponent_img_10_Template, 1, 0, \"img\", 8);\n        i0.ɵɵtemplate(11, HeaderComponent_ng_template_11_Template, 1, 0, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelement(13, \"img\", 10);\n        i0.ɵɵelementStart(14, \"div\", 11)(15, \"img\", 12);\n        i0.ɵɵlistener(\"error\", function HeaderComponent_Template_img_error_15_listener($event) {\n          return ctx.errorImage($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"rs-home-header-useroptions\", 13);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(17, \"rs-home-newpublicacao\");\n      }\n\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(12);\n\n        let tmp_1_0;\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.elementActive && !((tmp_1_0 = ctx.formGroup.get(\"query\")) == null ? null : tmp_1_0.hasError(\"required\")));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.url === \"/home\")(\"ngIfElse\", _r3);\n        i0.ɵɵadvance(5);\n        i0.ɵɵpropertyInterpolate2(\"src\", \"\", ctx.urlApi, \"/api/v1/usuarios/\", ctx.usernameUsuarioAutenticado, \"/imagemDoPerfil\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"usernameUsuarioAutenticado\", ctx.usernameUsuarioAutenticado);\n      }\n    },\n    dependencies: [i1.RouterLink, i5.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i6.UserOptionsComponent, i7.FindUserComponent, i8.NewPublicacaoComponent, i5.AsyncPipe],\n    styles: [\".home-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;border-bottom:1px solid var(--cor-de-fundo);padding:0 25px;align-items:center;background-color:#fff}.header-espaco-interno[_ngcontent-%COMP%]{padding:10px 0}.home-header[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{font-weight:700;font-family:unset,sans-serif;font-size:25px}.find-user-field[_ngcontent-%COMP%]{position:relative}.home-header-nav[_ngcontent-%COMP%]{display:flex;column-gap:30px;align-items:center}.form-search[_ngcontent-%COMP%]{border:none;outline:none;background-color:#e9e9e9b4;border-radius:5px;padding:10px 5px}.home-header-nav[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#000;text-decoration:none;padding:0 12px;font-size:18px}.home-header-nav[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.icon-nav[_ngcontent-%COMP%]{width:25px;height:25px}.img-perfil-link[_ngcontent-%COMP%]{border-radius:15px}@media screen and (max-width: 563px){.home-header[_ngcontent-%COMP%]{padding:0;column-gap:10px}.home-header[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{display:none}.home-header-nav[_ngcontent-%COMP%]{display:flex;column-gap:25px;align-items:center}.icon-nav[_ngcontent-%COMP%]{width:25px;height:25px}.form-search[_ngcontent-%COMP%]{font-size:4vw}}\"]\n  });\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}