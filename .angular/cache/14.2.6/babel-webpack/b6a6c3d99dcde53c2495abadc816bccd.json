{"ast":null,"code":"import { UsuarioUtil } from './../../../core/util/usuario.util';\nimport { Validators } from '@angular/forms';\nimport { NavigationEnd, RouterEvent } from '@angular/router';\nimport { filter, Subscription, debounceTime, Observable, pluck, of } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/core/service/user-authenticate.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"src/core/service/usuario.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./user-options/user-options.component\";\nimport * as i7 from \"../find-user/find-user.component\";\nimport * as i8 from \"../new-publicacao/new-publicacao.component\";\n\nfunction HeaderComponent_rs_home_finduser_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"rs-home-finduser\", 14);\n    i0.ɵɵpipe(1, \"async\");\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.formGroup)(\"usuariosConsulta\", i0.ɵɵpipeBind1(1, 2, ctx_r1.usuariosConsulta$));\n  }\n}\n\nfunction HeaderComponent_img_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n  }\n}\n\nfunction HeaderComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 16);\n  }\n}\n\nexport class HeaderComponent {\n  constructor(activateRoute, router, userAuthService, formBuilder, usuarioService) {\n    this.activateRoute = activateRoute;\n    this.router = router;\n    this.userAuthService = userAuthService;\n    this.formBuilder = formBuilder;\n    this.usuarioService = usuarioService;\n    this.timeSleep = 500;\n  }\n\n  ngOnInit() {\n    this.definirFormulario();\n    this.url = this.router.url;\n    this.observarConsultaDoUsuario();\n    this.observarNavegacoesDeRota();\n    this.usernameUsuarioAutenticado = this.userAuthService.pegarUsernameUsuarioAutenticado();\n  }\n\n  observarConsultaDoUsuario() {\n    this.formGroup.valueChanges.pipe(debounceTime(this.timeSleep)).pipe(pluck('query')).pipe(filter(username => {\n      if (username?.length && !/^\\s$/.test(username)) return true;\n      this.usuariosConsulta$ = of([]);\n      return false;\n    })).subscribe(username => this.usuariosConsulta$ = this.usuarioService.buscarUsuarioPorRegex(username));\n  }\n\n  observarNavegacoesDeRota() {\n    this.urlSubscription = this.router.events.pipe(filter(e => e instanceof RouterEvent && e instanceof NavigationEnd)).subscribe(e => this.url = this.router.url);\n  }\n\n  definirFormulario() {\n    this.formGroup = this.formBuilder.group({\n      query: ['', Validators.required]\n    });\n  }\n\n  ngOnDestroy() {\n    this.urlSubscription.unsubscribe();\n  }\n\n  ocultarMenuQuery() {\n    setTimeout(() => this.elementActive = false, 200);\n  }\n\n  errorImage(event) {\n    UsuarioUtil.definirImagemDefault(event);\n  }\n\n}\n\nHeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n  return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserAuthenticateService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.UsuarioService));\n};\n\nHeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HeaderComponent,\n  selectors: [[\"rs-home-header\"]],\n  decls: 18,\n  vars: 6,\n  consts: [[1, \"home-header\"], [1, \"header-espaco-interno\"], [1, \"header-espaco-interno\", \"find-user-field\"], [3, \"formGroup\"], [\"formControlName\", \"query\", \"placeholder\", \"Pesquisar usuarios\", \"type\", \"search\", 1, \"form-search\", 3, \"blur\", \"focus\"], [\"inputQueryUser\", \"\"], [3, \"formGroup\", \"usuariosConsulta\", 4, \"ngIf\"], [1, \"header-espaco-interno\", \"home-header-nav\"], [\"class\", \"icon-nav clicavel\", \"routerLink\", \"/home\", \"src\", \"https://cdn1.iconfinder.com/data/icons/material-core/20/home-256.png\", 4, \"ngIf\", \"ngIfElse\"], [\"imagemAlternativa\", \"\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#novaPublicacaoModal\", \"src\", \"https://cdn2.iconfinder.com/data/icons/boxicons-regular-vol-1/24/bx-add-to-queue-256.png\", 1, \"icon-nav\", \"clicavel\"], [1, \"dropdown-center\"], [\"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"img-perfil-link\", \"icon-nav\", \"clicavel\", 3, \"src\", \"error\"], [3, \"usernameUsuarioAutenticado\"], [3, \"formGroup\", \"usuariosConsulta\"], [\"routerLink\", \"/home\", \"src\", \"https://cdn1.iconfinder.com/data/icons/material-core/20/home-256.png\", 1, \"icon-nav\", \"clicavel\"], [\"routerLink\", \"/home\", \"src\", \"https://cdn2.iconfinder.com/data/icons/app-user-interface-6/48/Home_Alt-256.png\", 1, \"icon-nav\", \"clicavel\"]],\n  template: function HeaderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"header\")(1, \"div\", 0)(2, \"h1\", 1);\n      i0.ɵɵtext(3, \"Rede social\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 2)(5, \"form\", 3)(6, \"input\", 4, 5);\n      i0.ɵɵlistener(\"blur\", function HeaderComponent_Template_input_blur_6_listener() {\n        return ctx.ocultarMenuQuery();\n      })(\"focus\", function HeaderComponent_Template_input_focus_6_listener() {\n        return ctx.elementActive = true;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(8, HeaderComponent_rs_home_finduser_8_Template, 2, 4, \"rs-home-finduser\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"nav\", 7);\n      i0.ɵɵtemplate(10, HeaderComponent_img_10_Template, 1, 0, \"img\", 8);\n      i0.ɵɵtemplate(11, HeaderComponent_ng_template_11_Template, 1, 0, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelement(13, \"img\", 10);\n      i0.ɵɵelementStart(14, \"div\", 11)(15, \"img\", 12);\n      i0.ɵɵlistener(\"error\", function HeaderComponent_Template_img_error_15_listener($event) {\n        return ctx.errorImage($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"rs-home-header-useroptions\", 13);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelement(17, \"rs-home-newpublicacao\");\n    }\n\n    if (rf & 2) {\n      const _r3 = i0.ɵɵreference(12);\n\n      let tmp_1_0;\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.elementActive && !((tmp_1_0 = ctx.formGroup.get(\"query\")) == null ? null : tmp_1_0.hasError(\"required\")));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.url === \"/home\")(\"ngIfElse\", _r3);\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate1(\"src\", \"http://192.168.0.74/api/v1/usuarios/\", ctx.usernameUsuarioAutenticado, \"/imagemDoPerfil\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"usernameUsuarioAutenticado\", ctx.usernameUsuarioAutenticado);\n    }\n  },\n  dependencies: [i1.RouterLink, i5.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i6.UserOptionsComponent, i7.FindUserComponent, i8.NewPublicacaoComponent, i5.AsyncPipe],\n  styles: [\".home-header[_ngcontent-%COMP%] {\\r\\n\\tdisplay: flex;\\r\\n\\tjustify-content: space-around;\\r\\n\\tborder-bottom: 1px solid var(--cor-de-fundo);\\r\\n\\tpadding: 0 25px;\\r\\n\\talign-items: center;\\r\\n\\tbackground-color: white;\\r\\n}\\r\\n\\r\\n.header-espaco-interno[_ngcontent-%COMP%] {\\r\\n\\tpadding: 10px 0;\\r\\n}\\r\\n\\r\\n.home-header[_ngcontent-%COMP%]    > h1[_ngcontent-%COMP%] {\\r\\n\\tfont-weight: 700;\\r\\n\\tfont-family: unset, sans-serif;\\r\\n\\tfont-size: 25px;\\r\\n}\\r\\n\\r\\n.find-user-field[_ngcontent-%COMP%] {\\r\\n\\tposition: relative;\\r\\n}\\r\\n\\r\\n.home-header-nav[_ngcontent-%COMP%] {\\r\\n\\tdisplay: flex;\\r\\n\\tcolumn-gap: 30px;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n.form-search[_ngcontent-%COMP%] {\\r\\n\\tborder: none;\\r\\n\\toutline: none;\\r\\n\\tbackground-color: #e9e9e9b4;\\r\\n\\tborder-radius: 5px;\\r\\n\\tpadding: 10px 5px;\\r\\n}\\r\\n\\r\\n.home-header-nav[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\\r\\n\\tcolor: black;\\r\\n\\ttext-decoration: none;\\r\\n\\tpadding: 0 12px;\\r\\n\\tfont-size: 18px;\\r\\n}\\r\\n\\r\\n.home-header-nav[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%]:hover {\\r\\n\\ttext-decoration: underline;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n.icon-nav[_ngcontent-%COMP%] {\\r\\n\\twidth: 25px;\\r\\n\\theight: 25px;\\r\\n}\\r\\n\\r\\n.img-perfil-link[_ngcontent-%COMP%] {\\r\\n\\tborder-radius: 15px;\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 500px) {\\r\\n\\t.home-header[_ngcontent-%COMP%] {\\r\\n\\t\\tpadding: 0;\\r\\n\\t\\tcolumn-gap: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.home-header[_ngcontent-%COMP%]    > h1[_ngcontent-%COMP%] {\\r\\n\\t\\tdisplay: none;\\r\\n\\t}\\r\\n\\r\\n\\t.home-header-nav[_ngcontent-%COMP%] {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tcolumn-gap: 25px;\\r\\n\\t\\talign-items: center;\\r\\n\\t}\\r\\n\\r\\n\\t.icon-nav[_ngcontent-%COMP%] {\\r\\n\\t\\twidth: 25px;\\r\\n\\t\\theight: 25px;\\r\\n\\t}\\r\\n\\r\\n\\t.form-search[_ngcontent-%COMP%] {\\r\\n\\t\\tfont-size: 4vw;\\r\\n\\t}\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlYWRlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0NBQ0MsYUFBYTtDQUNiLDZCQUE2QjtDQUM3Qiw0Q0FBNEM7Q0FDNUMsZUFBZTtDQUNmLG1CQUFtQjtDQUNuQix1QkFBdUI7QUFDeEI7O0FBRUE7Q0FDQyxlQUFlO0FBQ2hCOztBQUVBO0NBQ0MsZ0JBQWdCO0NBQ2hCLDhCQUE4QjtDQUM5QixlQUFlO0FBQ2hCOztBQUVBO0NBQ0Msa0JBQWtCO0FBQ25COztBQUVBO0NBQ0MsYUFBYTtDQUNiLGdCQUFnQjtDQUNoQixtQkFBbUI7QUFDcEI7O0FBRUE7Q0FDQyxZQUFZO0NBQ1osYUFBYTtDQUNiLDJCQUEyQjtDQUMzQixrQkFBa0I7Q0FDbEIsaUJBQWlCO0FBQ2xCOztBQUVBO0NBQ0MsWUFBWTtDQUNaLHFCQUFxQjtDQUNyQixlQUFlO0NBQ2YsZUFBZTtBQUNoQjs7QUFFQTtDQUNDLDBCQUEwQjtDQUMxQixlQUFlO0FBQ2hCOztBQUVBO0NBQ0MsV0FBVztDQUNYLFlBQVk7QUFDYjs7QUFFQTtDQUNDLG1CQUFtQjtBQUNwQjs7QUFFQTtDQUNDO0VBQ0MsVUFBVTtFQUNWLGdCQUFnQjtDQUNqQjs7Q0FFQTtFQUNDLGFBQWE7Q0FDZDs7Q0FFQTtFQUNDLGFBQWE7RUFDYixnQkFBZ0I7RUFDaEIsbUJBQW1CO0NBQ3BCOztDQUVBO0VBQ0MsV0FBVztFQUNYLFlBQVk7Q0FDYjs7Q0FFQTtFQUNDLGNBQWM7Q0FDZjtBQUNEIiwiZmlsZSI6ImhlYWRlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmhvbWUtaGVhZGVyIHtcclxuXHRkaXNwbGF5OiBmbGV4O1xyXG5cdGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xyXG5cdGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1jb3ItZGUtZnVuZG8pO1xyXG5cdHBhZGRpbmc6IDAgMjVweDtcclxuXHRhbGlnbi1pdGVtczogY2VudGVyO1xyXG5cdGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG4uaGVhZGVyLWVzcGFjby1pbnRlcm5vIHtcclxuXHRwYWRkaW5nOiAxMHB4IDA7XHJcbn1cclxuXHJcbi5ob21lLWhlYWRlciA+IGgxIHtcclxuXHRmb250LXdlaWdodDogNzAwO1xyXG5cdGZvbnQtZmFtaWx5OiB1bnNldCwgc2Fucy1zZXJpZjtcclxuXHRmb250LXNpemU6IDI1cHg7XHJcbn1cclxuXHJcbi5maW5kLXVzZXItZmllbGQge1xyXG5cdHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLmhvbWUtaGVhZGVyLW5hdiB7XHJcblx0ZGlzcGxheTogZmxleDtcclxuXHRjb2x1bW4tZ2FwOiAzMHB4O1xyXG5cdGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5mb3JtLXNlYXJjaCB7XHJcblx0Ym9yZGVyOiBub25lO1xyXG5cdG91dGxpbmU6IG5vbmU7XHJcblx0YmFja2dyb3VuZC1jb2xvcjogI2U5ZTllOWI0O1xyXG5cdGJvcmRlci1yYWRpdXM6IDVweDtcclxuXHRwYWRkaW5nOiAxMHB4IDVweDtcclxufVxyXG5cclxuLmhvbWUtaGVhZGVyLW5hdiA+IGEge1xyXG5cdGNvbG9yOiBibGFjaztcclxuXHR0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcblx0cGFkZGluZzogMCAxMnB4O1xyXG5cdGZvbnQtc2l6ZTogMThweDtcclxufVxyXG5cclxuLmhvbWUtaGVhZGVyLW5hdiA+IGE6aG92ZXIge1xyXG5cdHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG5cdGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLmljb24tbmF2IHtcclxuXHR3aWR0aDogMjVweDtcclxuXHRoZWlnaHQ6IDI1cHg7XHJcbn1cclxuXHJcbi5pbWctcGVyZmlsLWxpbmsge1xyXG5cdGJvcmRlci1yYWRpdXM6IDE1cHg7XHJcbn1cclxuXHJcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDUwMHB4KSB7XHJcblx0LmhvbWUtaGVhZGVyIHtcclxuXHRcdHBhZGRpbmc6IDA7XHJcblx0XHRjb2x1bW4tZ2FwOiAxMHB4O1xyXG5cdH1cclxuXHJcblx0LmhvbWUtaGVhZGVyID4gaDEge1xyXG5cdFx0ZGlzcGxheTogbm9uZTtcclxuXHR9XHJcblxyXG5cdC5ob21lLWhlYWRlci1uYXYge1xyXG5cdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdGNvbHVtbi1nYXA6IDI1cHg7XHJcblx0XHRhbGlnbi1pdGVtczogY2VudGVyO1xyXG5cdH1cclxuXHJcblx0Lmljb24tbmF2IHtcclxuXHRcdHdpZHRoOiAyNXB4O1xyXG5cdFx0aGVpZ2h0OiAyNXB4O1xyXG5cdH1cclxuXHJcblx0LmZvcm0tc2VhcmNoIHtcclxuXHRcdGZvbnQtc2l6ZTogNHZ3O1xyXG5cdH1cclxufSJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["UsuarioUtil","Validators","NavigationEnd","RouterEvent","filter","Subscription","debounceTime","Observable","pluck","of","i0","HeaderComponent","constructor","activateRoute","router","userAuthService","formBuilder","usuarioService","ngOnInit","definirFormulario","url","observarConsultaDoUsuario","observarNavegacoesDeRota","usernameUsuarioAutenticado","pegarUsernameUsuarioAutenticado","formGroup","valueChanges","pipe","timeSleep","username","length","test","usuariosConsulta$","subscribe","buscarUsuarioPorRegex","urlSubscription","events","e","group","query","required","ngOnDestroy","unsubscribe","ocultarMenuQuery","setTimeout","elementActive","errorImage","event","definirImagemDefault","selectors","decls","vars","consts","template","ctx","_r3"],"sourceRoot":"","sources":["C:\\Users\\Maria Sônia\\Documents\\Workspace-Node\\rede-social\\src\\app\\home\\header\\header.component.ts","C:\\Users\\Maria Sônia\\Documents\\Workspace-Node\\rede-social\\src\\app\\home\\header\\header.component.html"],"sourcesContent":["import { UsuarioUtil } from './../../../core/util/usuario.util';\nimport { UsuarioService } from 'src/core/service/usuario.service';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationEnd, Router, RouterEvent } from '@angular/router';\nimport { filter, Subscription, debounceTime, switchMap, Observable, pluck, of } from 'rxjs';\nimport { UserAuthenticateService } from 'src/core/service/user-authenticate.service';\nimport { Usuario } from 'src/model/usuario';\nimport { imgDefault } from 'src/core/util/imagem-default';\n\n@Component({\n\tselector: 'rs-home-header',\n\ttemplateUrl: './header.component.html',\n\tstyleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit, OnDestroy {\n\tpublic url: string;\n\tpublic queryUser: string;\n\tpublic elementActive: boolean;\n\tpublic usernameUsuarioAutenticado: string;\n\tpublic formGroup: FormGroup;\n\tpublic usuariosConsulta$: Observable<Array<Usuario>>;\n\tprivate urlSubscription: Subscription;\n\tpublic imagemUser: string;\n\tprivate readonly timeSleep: number = 500;\n\n\tconstructor(private activateRoute: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate userAuthService: UserAuthenticateService,\n\t\tprivate formBuilder: FormBuilder,\n\t\tprivate usuarioService: UsuarioService) { }\n\n\n\tngOnInit(): void {\n\t\tthis.definirFormulario();\n\t\tthis.url = this.router.url;\n\t\tthis.observarConsultaDoUsuario();\n\t\tthis.observarNavegacoesDeRota()\n\t\tthis.usernameUsuarioAutenticado = this.userAuthService.pegarUsernameUsuarioAutenticado();\n\t}\n\n\tobservarConsultaDoUsuario() {\n\t\tthis.formGroup.valueChanges\n\t\t\t.pipe(debounceTime(this.timeSleep))\n\t\t\t.pipe(pluck('query'))\n\t\t\t.pipe(filter((username: string) => {\n\t\t\t\tif (username?.length && !/^\\s$/.test(username)) return true;\n\t\t\t\tthis.usuariosConsulta$ = of([]);\n\t\t\t\treturn false;\n\t\t\t}))\n\t\t\t.subscribe((username) => this.usuariosConsulta$ = this.usuarioService.buscarUsuarioPorRegex(username));\n\t}\n\n\tobservarNavegacoesDeRota() {\n\t\tthis.urlSubscription = this.router.events\n\t\t\t.pipe(filter(e => e instanceof RouterEvent && e instanceof NavigationEnd))\n\t\t\t.subscribe(e => this.url = this.router.url);\n\t}\n\n\tprivate definirFormulario() {\n\t\tthis.formGroup = this.formBuilder.group({\n\t\t\tquery: ['', Validators.required]\n\t\t});\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.urlSubscription.unsubscribe();\n\t}\n\n\tocultarMenuQuery() {\n\t\tsetTimeout(() => this.elementActive = false, 200);\n\t}\n\n\terrorImage(event: Event) {\n\t\tUsuarioUtil.definirImagemDefault(event);\n\t}\n}\n","<header>\n\t<div class=\"home-header\">\n\t\t<h1 class=\"header-espaco-interno\">Rede social</h1>\n\t\t<div class=\"header-espaco-interno find-user-field\">\n\t\t\t<form [formGroup]=\"formGroup\">\n\t\t\t\t<input formControlName=\"query\" (blur)=\"ocultarMenuQuery()\" (focus)=\"elementActive = true\"\n\t\t\t\t\tclass=\"form-search\" placeholder=\"Pesquisar usuarios\" type=\"search\" #inputQueryUser>\n\t\t\t</form>\n\t\t\t<rs-home-finduser [formGroup]=\"formGroup\" [usuariosConsulta]=\"usuariosConsulta$ | async\"\n\t\t\t\t*ngIf=\"elementActive && !formGroup.get('query')?.hasError('required')\"></rs-home-finduser>\n\t\t</div>\n\t\t<nav class=\"header-espaco-interno home-header-nav\">\n\t\t\t<img *ngIf=\"url === '/home'; else imagemAlternativa\" class=\"icon-nav clicavel\" routerLink=\"/home\"\n\t\t\t\tsrc=\"https://cdn1.iconfinder.com/data/icons/material-core/20/home-256.png\">\n\t\t\t<ng-template #imagemAlternativa><img class=\"icon-nav clicavel\" routerLink=\"/home\"\n\t\t\t\t\tsrc=\"https://cdn2.iconfinder.com/data/icons/app-user-interface-6/48/Home_Alt-256.png\">\n\t\t\t</ng-template>\n\t\t\t<img data-bs-toggle=\"modal\" data-bs-target=\"#novaPublicacaoModal\" class=\"icon-nav clicavel\"\n\t\t\t\tsrc=\"https://cdn2.iconfinder.com/data/icons/boxicons-regular-vol-1/24/bx-add-to-queue-256.png\">\n\t\t\t<div class=\"dropdown-center\">\n\t\t\t\t<img data-bs-toggle=\"dropdown\" aria-expanded=\"false\" (error)=\"errorImage($event)\" class=\"img-perfil-link icon-nav clicavel\"\n\t\t\t\t\tsrc=\"http://192.168.0.74/api/v1/usuarios/{{usernameUsuarioAutenticado}}/imagemDoPerfil\">\n\t\t\t\t<rs-home-header-useroptions [usernameUsuarioAutenticado]=\"usernameUsuarioAutenticado\">\n\t\t\t\t</rs-home-header-useroptions>\n\t\t\t</div>\n\t\t</nav>\n\t</div>\n</header>\n<rs-home-newpublicacao></rs-home-newpublicacao>"]},"metadata":{},"sourceType":"module"}