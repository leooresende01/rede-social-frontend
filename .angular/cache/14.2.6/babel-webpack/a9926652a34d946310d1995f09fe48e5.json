{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { UsuarioUtil } from 'src/core/util/usuario.util';\nimport { urlApi } from 'src/core/util/url-api';\nimport { tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/core/service/user-authenticate.service\";\nimport * as i3 from \"src/core/service/mensagem.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../shared/spinner-loading/spinner-loading.component\";\n\nfunction ChatMensagemComponent_div_8_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const mensagem_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(mensagem_r1.mensagem);\n  }\n}\n\nfunction ChatMensagemComponent_div_8_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16)(2, \"span\", 17);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const mensagem_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(mensagem_r1.mensagem);\n  }\n}\n\nfunction ChatMensagemComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 10);\n    i0.ɵɵtemplate(2, ChatMensagemComponent_div_8_div_2_Template, 3, 1, \"div\", 11);\n    i0.ɵɵtemplate(3, ChatMensagemComponent_div_8_div_3_Template, 4, 1, \"div\", 12);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const mensagem_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", mensagem_r1.emissor !== ctx_r0.usuarioAuthenticadoUsername);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", mensagem_r1.emissor === ctx_r0.usuarioAuthenticadoUsername);\n  }\n}\n\nexport class ChatMensagemComponent {\n  constructor(activateRouter, userAuthService, mensagemService, formBuilder) {\n    this.activateRouter = activateRouter;\n    this.userAuthService = userAuthService;\n    this.mensagemService = mensagemService;\n    this.formBuilder = formBuilder;\n    this.urlApi = urlApi;\n  }\n\n  ngOnInit() {\n    this.usuarioAuthenticadoUsername = this.userAuthService.pegarUsernameUsuarioAutenticado();\n    this.activateRouter.params.subscribe(params => {\n      const username = params['username'];\n      this.outroUsuarioDoChat = username;\n      this.mensagemService.buscarMensagensComOUsuario(username).pipe(tap(mensagens => this.mensagens = mensagens));\n    });\n    this.formGroup = this.formBuilder.group({\n      mensagem: ['', [Validators.required]]\n    });\n    this.mensagemService.escutarMensagensDoServidor().subscribe(mensagem => this.mensagens.push(mensagem));\n  }\n\n  enviarMensagem() {\n    const mensagem = this.formGroup.get('mensagem')?.value;\n    this.mensagemService.enviarMensagem(mensagem, this.outroUsuarioDoChat);\n    this.formGroup.reset();\n  }\n\n  errorImage(event) {\n    UsuarioUtil.definirImagemDefault(event);\n  }\n\n}\n\nChatMensagemComponent.ɵfac = function ChatMensagemComponent_Factory(t) {\n  return new (t || ChatMensagemComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UserAuthenticateService), i0.ɵɵdirectiveInject(i3.MensagemService), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\n\nChatMensagemComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatMensagemComponent,\n  selectors: [[\"ng-component\"]],\n  decls: 15,\n  vars: 8,\n  consts: [[1, \"card-chat\"], [1, \"chat-com-usuarios\"], [1, \"card-topo\"], [1, \"chats\"], [3, \"elementoAguardado\"], [4, \"ngFor\", \"ngForOf\"], [1, \"flex-grow-0\", \"py-3\", \"px-4\", \"border-top\", \"enviar-mensagens\"], [1, \"input-group\", 3, \"formGroup\", \"submit\"], [\"formControlName\", \"mensagem\", \"type\", \"text\", \"placeholder\", \"Digite uma mensagem\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"card\"], [\"class\", \"d-flex flex-row espaco-msg mansagem-outro-usuario\", 4, \"ngIf\"], [\"class\", \"d-flex flex-row espaco-msg mensagem-usuario-autenticado\", 4, \"ngIf\"], [1, \"d-flex\", \"flex-row\", \"espaco-msg\", \"mansagem-outro-usuario\"], [1, \"chat\", \"ml-2\", \"p-3\"], [1, \"d-flex\", \"flex-row\", \"espaco-msg\", \"mensagem-usuario-autenticado\"], [1, \"bg-white\", \"mr-2\", \"p-3\"], [1, \"text-muted\"]],\n  template: function ChatMensagemComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h3\");\n      i0.ɵɵtext(4, \"Chats abertos\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 3);\n      i0.ɵɵelement(6, \"rs-spinnerloading\", 4);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵtemplate(8, ChatMensagemComponent_div_8_Template, 4, 2, \"div\", 5);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵelementStart(10, \"div\", 6)(11, \"form\", 7);\n      i0.ɵɵlistener(\"submit\", function ChatMensagemComponent_Template_form_submit_11_listener() {\n        return ctx.enviarMensagem();\n      });\n      i0.ɵɵelement(12, \"input\", 8);\n      i0.ɵɵelementStart(13, \"button\", 9);\n      i0.ɵɵtext(14, \"Enviar\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"elementoAguardado\", i0.ɵɵpipeBind1(7, 4, ctx.mensagens$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(9, 6, ctx.mensagens$));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.formGroup.invalid);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.SpinnerLoadingComponent, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i5.AsyncPipe],\n  styles: [\".card-chat[_ngcontent-%COMP%] {\\r\\n\\tpadding: 30px 30vw;\\r\\n}\\r\\n\\r\\n.card-topo[_ngcontent-%COMP%] {\\r\\n\\tpadding: 20px 0;\\r\\n\\ttext-align: center;\\r\\n\\tborder-bottom: 1px solid var(--cor-de-fundo);\\r\\n}\\r\\n\\r\\n.card-topo[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%] {\\r\\n\\tfont-size: 25px;\\r\\n}\\r\\n\\r\\n.chat-com-usuarios[_ngcontent-%COMP%] {\\r\\n\\tbackground-color: white;\\r\\n\\tborder: 1px solid var(--cor-de-fundo);\\r\\n\\tborder-radius: 5px;\\r\\n\\twidth: 100%;\\r\\n}\\r\\n\\r\\n.espaco-msg[_ngcontent-%COMP%] {\\r\\n\\tpadding: 10px;\\r\\n}\\r\\n\\r\\n.espaco-msg-foto[_ngcontent-%COMP%] {\\r\\n\\tcolumn-gap: 5px;\\r\\n}\\r\\n\\r\\n.img-perfil[_ngcontent-%COMP%] {\\r\\n\\twidth: 45px;\\r\\n\\theight: 45px;\\r\\n\\tborder-radius: 35px;\\r\\n}\\r\\n\\r\\n.header-modal-align[_ngcontent-%COMP%] {\\r\\n\\tdisplay: grid;\\r\\n\\tgrid-template-columns: 1fr 1fr 1fr;\\r\\n}\\r\\n\\r\\n.chats[_ngcontent-%COMP%] {\\r\\n\\toverflow: auto;\\r\\n\\tmin-height: 20vh;\\r\\n\\tmax-height: 60vh;\\r\\n}\\r\\n\\r\\n.card[_ngcontent-%COMP%] {\\r\\n\\tborder: none;\\r\\n\\tborder-radius: 15px;\\r\\n}\\r\\n\\r\\n.adiv[_ngcontent-%COMP%] {\\r\\n\\tbackground: #04CB28;\\r\\n\\tborder-radius: 15px;\\r\\n\\tborder-bottom-right-radius: 0;\\r\\n\\tborder-bottom-left-radius: 0;\\r\\n\\tfont-size: 12px;\\r\\n\\theight: 46px;\\r\\n}\\r\\n\\r\\n.chat[_ngcontent-%COMP%] {\\r\\n\\tborder: none;\\r\\n\\tbackground: #E2FFE8;\\r\\n\\tfont-size: 10px;\\r\\n\\tborder-radius: 20px;\\r\\n}\\r\\n\\r\\n.bg-white[_ngcontent-%COMP%] {\\r\\n\\tborder: 1px solid #E7E7E9;\\r\\n\\tfont-size: 10px;\\r\\n\\tborder-radius: 20px;\\r\\n}\\r\\n\\r\\n.myvideo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n\\tborder-radius: 20px\\r\\n}\\r\\n\\r\\n.dot[_ngcontent-%COMP%] {\\r\\n\\tfont-weight: bold;\\r\\n}\\r\\n\\r\\n.form-control[_ngcontent-%COMP%] {\\r\\n\\tborder-radius: 12px;\\r\\n\\tborder: 1px solid #F0F0F0;\\r\\n\\tfont-size: 8px;\\r\\n}\\r\\n\\r\\n.form-control[_ngcontent-%COMP%]:focus {\\r\\n\\tbox-shadow: none;\\r\\n}\\r\\n\\r\\n.form-control[_ngcontent-%COMP%]::placeholder {\\r\\n\\tfont-size: 8px;\\r\\n\\tcolor: #C4C4C4;\\r\\n}\\r\\n\\r\\n.mansagem-outro-usuario[_ngcontent-%COMP%] {\\r\\n\\tmargin-right: 50px;\\r\\n}\\r\\n\\r\\n.mensagem-usuario-autenticado[_ngcontent-%COMP%] {\\r\\n\\talign-self: flex-end;\\r\\n\\tmargin-left: 50px;\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 1024px) {\\r\\n\\t.card-chat[_ngcontent-%COMP%] {\\r\\n\\t\\tpadding: 30px 15vw;\\r\\n\\t}\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 500px) {\\r\\n\\t.card-chat[_ngcontent-%COMP%] {\\r\\n\\t\\tpadding: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.chats[_ngcontent-%COMP%] {\\r\\n\\t\\toverflow: auto;\\r\\n\\t\\theight: calc(100vh - 130px);\\r\\n\\t\\tmax-height: none;\\r\\n\\t\\tmin-height: none;\\r\\n\\t}\\r\\n\\r\\n\\t.chat-com-usuarios[_ngcontent-%COMP%] {\\r\\n\\t\\tbackground-color: white;\\r\\n\\t\\tborder: none;\\r\\n\\t\\tborder-radius: 0;\\r\\n\\t\\twidth: 100%;\\r\\n\\t}\\r\\n\\r\\n\\t.chat-username-usuario[_ngcontent-%COMP%] {\\r\\n\\t\\tfont-size: 15px;\\r\\n\\t}\\r\\n\\r\\n\\t.chat-ultima-mensagem[_ngcontent-%COMP%] {\\r\\n\\t\\tfont-size: 11px;\\r\\n\\t}\\r\\n\\r\\n\\t.horario-envio-mensagem[_ngcontent-%COMP%] {\\r\\n\\t\\tfont-size: 9px;\\r\\n\\t}\\r\\n\\r\\n\\t.enviar-mensagens[_ngcontent-%COMP%] {\\r\\n\\t\\tposition: sticky;\\r\\n\\t\\tbackground-color: white;\\r\\n\\t\\tbottom: 0;\\r\\n\\t}\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 350px) {\\r\\n\\t.card-topo[_ngcontent-%COMP%] {\\r\\n\\t\\tpadding: 20px 0;\\r\\n\\t\\ttext-align: center;\\r\\n\\t\\tborder-bottom: 1px solid var(--cor-de-fundo);\\r\\n\\t}\\r\\n\\r\\n\\t.menor[_ngcontent-%COMP%] {\\r\\n\\t\\tfont-size: 11px;\\r\\n\\t}\\r\\n\\r\\n\\t.chat-username-usuario[_ngcontent-%COMP%] {\\r\\n\\t\\tfont-size: 11px;\\r\\n\\t}\\r\\n\\r\\n\\t.chat-ultima-mensagem[_ngcontent-%COMP%] {\\r\\n\\t\\tfont-size: 10px;\\r\\n\\t}\\r\\n\\r\\n\\t.horario-envio-mensagem[_ngcontent-%COMP%] {\\r\\n\\t\\tfont-size: 8px;\\r\\n\\t}\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtbWVuc2FnZW0uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQUNDLGtCQUFrQjtBQUNuQjs7QUFFQTtDQUNDLGVBQWU7Q0FDZixrQkFBa0I7Q0FDbEIsNENBQTRDO0FBQzdDOztBQUVBO0NBQ0MsZUFBZTtBQUNoQjs7QUFFQTtDQUNDLHVCQUF1QjtDQUN2QixxQ0FBcUM7Q0FDckMsa0JBQWtCO0NBQ2xCLFdBQVc7QUFDWjs7QUFFQTtDQUNDLGFBQWE7QUFDZDs7QUFFQTtDQUNDLGVBQWU7QUFDaEI7O0FBRUE7Q0FDQyxXQUFXO0NBQ1gsWUFBWTtDQUNaLG1CQUFtQjtBQUNwQjs7QUFFQTtDQUNDLGFBQWE7Q0FDYixrQ0FBa0M7QUFDbkM7O0FBR0E7Q0FDQyxjQUFjO0NBQ2QsZ0JBQWdCO0NBQ2hCLGdCQUFnQjtBQUNqQjs7QUFFQTtDQUNDLFlBQVk7Q0FDWixtQkFBbUI7QUFDcEI7O0FBRUE7Q0FDQyxtQkFBbUI7Q0FDbkIsbUJBQW1CO0NBQ25CLDZCQUE2QjtDQUM3Qiw0QkFBNEI7Q0FDNUIsZUFBZTtDQUNmLFlBQVk7QUFDYjs7QUFFQTtDQUNDLFlBQVk7Q0FDWixtQkFBbUI7Q0FDbkIsZUFBZTtDQUNmLG1CQUFtQjtBQUNwQjs7QUFFQTtDQUNDLHlCQUF5QjtDQUN6QixlQUFlO0NBQ2YsbUJBQW1CO0FBQ3BCOztBQUVBO0NBQ0M7QUFDRDs7QUFFQTtDQUNDLGlCQUFpQjtBQUNsQjs7QUFFQTtDQUNDLG1CQUFtQjtDQUNuQix5QkFBeUI7Q0FDekIsY0FBYztBQUNmOztBQUVBO0NBQ0MsZ0JBQWdCO0FBQ2pCOztBQUVBO0NBQ0MsY0FBYztDQUNkLGNBQWM7QUFDZjs7QUFFQTtDQUNDLGtCQUFrQjtBQUNuQjs7QUFFQTtDQUNDLG9CQUFvQjtDQUNwQixpQkFBaUI7QUFDbEI7O0FBRUE7Q0FDQztFQUNDLGtCQUFrQjtDQUNuQjtBQUNEOztBQUVBO0NBQ0M7RUFDQyxVQUFVO0NBQ1g7O0NBRUE7RUFDQyxjQUFjO0VBQ2QsMkJBQTJCO0VBQzNCLGdCQUFnQjtFQUNoQixnQkFBZ0I7Q0FDakI7O0NBRUE7RUFDQyx1QkFBdUI7RUFDdkIsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixXQUFXO0NBQ1o7O0NBRUE7RUFDQyxlQUFlO0NBQ2hCOztDQUVBO0VBQ0MsZUFBZTtDQUNoQjs7Q0FFQTtFQUNDLGNBQWM7Q0FDZjs7Q0FFQTtFQUNDLGdCQUFnQjtFQUNoQix1QkFBdUI7RUFDdkIsU0FBUztDQUNWO0FBQ0Q7O0FBRUE7Q0FDQztFQUNDLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsNENBQTRDO0NBQzdDOztDQUVBO0VBQ0MsZUFBZTtDQUNoQjs7Q0FFQTtFQUNDLGVBQWU7Q0FDaEI7O0NBRUE7RUFDQyxlQUFlO0NBQ2hCOztDQUVBO0VBQ0MsY0FBYztDQUNmO0FBQ0QiLCJmaWxlIjoiY2hhdC1tZW5zYWdlbS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNhcmQtY2hhdCB7XHJcblx0cGFkZGluZzogMzBweCAzMHZ3O1xyXG59XHJcblxyXG4uY2FyZC10b3BvIHtcclxuXHRwYWRkaW5nOiAyMHB4IDA7XHJcblx0dGV4dC1hbGlnbjogY2VudGVyO1xyXG5cdGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1jb3ItZGUtZnVuZG8pO1xyXG59XHJcblxyXG4uY2FyZC10b3BvPmgzIHtcclxuXHRmb250LXNpemU6IDI1cHg7XHJcbn1cclxuXHJcbi5jaGF0LWNvbS11c3VhcmlvcyB7XHJcblx0YmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcblx0Ym9yZGVyOiAxcHggc29saWQgdmFyKC0tY29yLWRlLWZ1bmRvKTtcclxuXHRib3JkZXItcmFkaXVzOiA1cHg7XHJcblx0d2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5lc3BhY28tbXNnIHtcclxuXHRwYWRkaW5nOiAxMHB4O1xyXG59XHJcblxyXG4uZXNwYWNvLW1zZy1mb3RvIHtcclxuXHRjb2x1bW4tZ2FwOiA1cHg7XHJcbn1cclxuXHJcbi5pbWctcGVyZmlsIHtcclxuXHR3aWR0aDogNDVweDtcclxuXHRoZWlnaHQ6IDQ1cHg7XHJcblx0Ym9yZGVyLXJhZGl1czogMzVweDtcclxufVxyXG5cclxuLmhlYWRlci1tb2RhbC1hbGlnbiB7XHJcblx0ZGlzcGxheTogZ3JpZDtcclxuXHRncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyO1xyXG59XHJcblxyXG5cclxuLmNoYXRzIHtcclxuXHRvdmVyZmxvdzogYXV0bztcclxuXHRtaW4taGVpZ2h0OiAyMHZoO1xyXG5cdG1heC1oZWlnaHQ6IDYwdmg7XHJcbn1cclxuXHJcbi5jYXJkIHtcclxuXHRib3JkZXI6IG5vbmU7XHJcblx0Ym9yZGVyLXJhZGl1czogMTVweDtcclxufVxyXG5cclxuLmFkaXYge1xyXG5cdGJhY2tncm91bmQ6ICMwNENCMjg7XHJcblx0Ym9yZGVyLXJhZGl1czogMTVweDtcclxuXHRib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMDtcclxuXHRib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xyXG5cdGZvbnQtc2l6ZTogMTJweDtcclxuXHRoZWlnaHQ6IDQ2cHg7XHJcbn1cclxuXHJcbi5jaGF0IHtcclxuXHRib3JkZXI6IG5vbmU7XHJcblx0YmFja2dyb3VuZDogI0UyRkZFODtcclxuXHRmb250LXNpemU6IDEwcHg7XHJcblx0Ym9yZGVyLXJhZGl1czogMjBweDtcclxufVxyXG5cclxuLmJnLXdoaXRlIHtcclxuXHRib3JkZXI6IDFweCBzb2xpZCAjRTdFN0U5O1xyXG5cdGZvbnQtc2l6ZTogMTBweDtcclxuXHRib3JkZXItcmFkaXVzOiAyMHB4O1xyXG59XHJcblxyXG4ubXl2aWRlbyBpbWcge1xyXG5cdGJvcmRlci1yYWRpdXM6IDIwcHhcclxufVxyXG5cclxuLmRvdCB7XHJcblx0Zm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi5mb3JtLWNvbnRyb2wge1xyXG5cdGJvcmRlci1yYWRpdXM6IDEycHg7XHJcblx0Ym9yZGVyOiAxcHggc29saWQgI0YwRjBGMDtcclxuXHRmb250LXNpemU6IDhweDtcclxufVxyXG5cclxuLmZvcm0tY29udHJvbDpmb2N1cyB7XHJcblx0Ym94LXNoYWRvdzogbm9uZTtcclxufVxyXG5cclxuLmZvcm0tY29udHJvbDo6cGxhY2Vob2xkZXIge1xyXG5cdGZvbnQtc2l6ZTogOHB4O1xyXG5cdGNvbG9yOiAjQzRDNEM0O1xyXG59XHJcblxyXG4ubWFuc2FnZW0tb3V0cm8tdXN1YXJpbyB7XHJcblx0bWFyZ2luLXJpZ2h0OiA1MHB4O1xyXG59XHJcblxyXG4ubWVuc2FnZW0tdXN1YXJpby1hdXRlbnRpY2FkbyB7XHJcblx0YWxpZ24tc2VsZjogZmxleC1lbmQ7XHJcblx0bWFyZ2luLWxlZnQ6IDUwcHg7XHJcbn1cclxuXHJcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEwMjRweCkge1xyXG5cdC5jYXJkLWNoYXQge1xyXG5cdFx0cGFkZGluZzogMzBweCAxNXZ3O1xyXG5cdH1cclxufVxyXG5cclxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNTAwcHgpIHtcclxuXHQuY2FyZC1jaGF0IHtcclxuXHRcdHBhZGRpbmc6IDA7XHJcblx0fVxyXG5cclxuXHQuY2hhdHMge1xyXG5cdFx0b3ZlcmZsb3c6IGF1dG87XHJcblx0XHRoZWlnaHQ6IGNhbGMoMTAwdmggLSAxMzBweCk7XHJcblx0XHRtYXgtaGVpZ2h0OiBub25lO1xyXG5cdFx0bWluLWhlaWdodDogbm9uZTtcclxuXHR9XHJcblxyXG5cdC5jaGF0LWNvbS11c3VhcmlvcyB7XHJcblx0XHRiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuXHRcdGJvcmRlcjogbm9uZTtcclxuXHRcdGJvcmRlci1yYWRpdXM6IDA7XHJcblx0XHR3aWR0aDogMTAwJTtcclxuXHR9XHJcblxyXG5cdC5jaGF0LXVzZXJuYW1lLXVzdWFyaW8ge1xyXG5cdFx0Zm9udC1zaXplOiAxNXB4O1xyXG5cdH1cclxuXHJcblx0LmNoYXQtdWx0aW1hLW1lbnNhZ2VtIHtcclxuXHRcdGZvbnQtc2l6ZTogMTFweDtcclxuXHR9XHJcblxyXG5cdC5ob3JhcmlvLWVudmlvLW1lbnNhZ2VtIHtcclxuXHRcdGZvbnQtc2l6ZTogOXB4O1xyXG5cdH1cclxuXHJcblx0LmVudmlhci1tZW5zYWdlbnMge1xyXG5cdFx0cG9zaXRpb246IHN0aWNreTtcclxuXHRcdGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG5cdFx0Ym90dG9tOiAwO1xyXG5cdH1cclxufVxyXG5cclxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMzUwcHgpIHtcclxuXHQuY2FyZC10b3BvIHtcclxuXHRcdHBhZGRpbmc6IDIwcHggMDtcclxuXHRcdHRleHQtYWxpZ246IGNlbnRlcjtcclxuXHRcdGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1jb3ItZGUtZnVuZG8pO1xyXG5cdH1cclxuXHJcblx0Lm1lbm9yIHtcclxuXHRcdGZvbnQtc2l6ZTogMTFweDtcclxuXHR9XHJcblxyXG5cdC5jaGF0LXVzZXJuYW1lLXVzdWFyaW8ge1xyXG5cdFx0Zm9udC1zaXplOiAxMXB4O1xyXG5cdH1cclxuXHJcblx0LmNoYXQtdWx0aW1hLW1lbnNhZ2VtIHtcclxuXHRcdGZvbnQtc2l6ZTogMTBweDtcclxuXHR9XHJcblxyXG5cdC5ob3JhcmlvLWVudmlvLW1lbnNhZ2VtIHtcclxuXHRcdGZvbnQtc2l6ZTogOHB4O1xyXG5cdH1cclxufSJdfQ== */\"]\n});","map":{"version":3,"mappings":"AAAA,SAAiCA,UAAjC,QAAmD,gBAAnD;AAKA,SAASC,WAAT,QAA4B,4BAA5B;AAEA,SAASC,MAAT,QAAuB,uBAAvB;AAEA,SAAqBC,GAArB,QAAgC,MAAhC;;;;;;;;;;;ICAKC,gCAC2D,CAD3D,EAC2D,KAD3D,EAC2D,EAD3D;IAE4BA;IAAqBA;;;;;IAArBA;IAAAA;;;;;;IAE5BA,gCACiE,CADjE,EACiE,KADjE,EACiE,EADjE,EACiE,CADjE,EACiE,MADjE,EACiE,EADjE;IAEyDA;IAAqBA;;;;;IAArBA;IAAAA;;;;;;IAR3DA,4BAAiD,CAAjD,EAAiD,KAAjD,EAAiD,EAAjD;IAEEA;IAIAA;IAIDA;;;;;;IAROA;IAAAA;IAIAA;IAAAA;;;;ADEX,OAAM,MAAOC,qBAAP,CAA4B;EAOjCC,YAAoBC,cAApB,EACSC,eADT,EAESC,eAFT,EAGSC,WAHT,EAGiC;IAHb;IACX;IACA;IACA;IARF,cAAiBR,MAAjB;EAQ+B;;EAEtCS,QAAQ;IACP,KAAKC,2BAAL,GAAmC,KAAKJ,eAAL,CAAqBK,+BAArB,EAAnC;IACA,KAAKN,cAAL,CAAoBO,MAApB,CACEC,SADF,CACaD,MAAM,IAAG;MACpB,MAAME,QAAQ,GAAGF,MAAM,CAAC,UAAD,CAAvB;MACA,KAAKG,kBAAL,GAA0BD,QAA1B;MACA,KAAKP,eAAL,CAAqBS,0BAArB,CAAgDF,QAAhD,EACEG,IADF,CACOhB,GAAG,CAACiB,SAAS,IAAI,KAAKA,SAAL,GAAiBA,SAA/B,CADV;IAEA,CANF;IAOC,KAAKC,SAAL,GAAiB,KAAKX,WAAL,CAAiBY,KAAjB,CAAuB;MACvCC,QAAQ,EAAE,CAAC,EAAD,EAAK,CAACvB,UAAU,CAACwB,QAAZ,CAAL;IAD6B,CAAvB,CAAjB;IAGD,KAAKf,eAAL,CAAqBgB,0BAArB,GACEV,SADF,CACYQ,QAAQ,IAAI,KAAKH,SAAL,CAAeM,IAAf,CAAoBH,QAApB,CADxB;EAEA;;EAEDI,cAAc;IACb,MAAMJ,QAAQ,GAAG,KAAKF,SAAL,CAAeO,GAAf,CAAmB,UAAnB,GAAgCC,KAAjD;IACA,KAAKpB,eAAL,CAAqBkB,cAArB,CAAoCJ,QAApC,EAA8C,KAAKN,kBAAnD;IACA,KAAKI,SAAL,CAAeS,KAAf;EACA;;EAEDC,UAAU,CAACC,KAAD,EAAa;IACtB/B,WAAW,CAACgC,oBAAZ,CAAiCD,KAAjC;EACA;;AApCgC;;;mBAArB3B,uBAAqBD;AAAA;;;QAArBC;EAAqB6B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCflClC,+BAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,IAAvB;MAGOA;MAAaA;MAElBA;MACCA;;MACAA;;MAYAA,gCAA+D,EAA/D,EAA+D,MAA/D,EAA+D,CAA/D;MACmDA;QAAA,OAAUmC,oBAAV;MAA0B,CAA1B;MACjDnC;MACAA;MAA6EA;MAAMA;;;;MAhBlEA;MAAAA;MACOA;MAAAA;MAanBA;MAAAA;MAEGA;MAAAA","names":["Validators","UsuarioUtil","urlApi","tap","i0","ChatMensagemComponent","constructor","activateRouter","userAuthService","mensagemService","formBuilder","ngOnInit","usuarioAuthenticadoUsername","pegarUsernameUsuarioAutenticado","params","subscribe","username","outroUsuarioDoChat","buscarMensagensComOUsuario","pipe","mensagens","formGroup","group","mensagem","required","escutarMensagensDoServidor","push","enviarMensagem","get","value","reset","errorImage","event","definirImagemDefault","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Maria Sônia\\Documents\\Workspace-Node\\rede-social\\src\\app\\home\\chats\\chat-mensagem\\chat-mensagem.component.ts","C:\\Users\\Maria Sônia\\Documents\\Workspace-Node\\rede-social\\src\\app\\home\\chats\\chat-mensagem\\chat-mensagem.component.html"],"sourcesContent":["import { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { MensagemDto } from 'src/core/dto/mensagem.dto';\nimport { ChatDto } from './../../../../core/dto/chat.dto';\nimport { ActivatedRoute } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { UsuarioUtil } from 'src/core/util/usuario.util';\nimport { UserAuthenticateService } from 'src/core/service/user-authenticate.service';\nimport { urlApi } from 'src/core/util/url-api';\nimport { MensagemService } from 'src/core/service/mensagem.service';\nimport { Observable, tap } from 'rxjs';\n\n@Component({\n\ttemplateUrl: './chat-mensagem.component.html',\n\tstyleUrls: ['./chat-mensagem.component.css']\n})\nexport class ChatMensagemComponent implements OnInit {\n\tpublic usuarioAuthenticadoUsername: string;\n\tpublic urlApi: string = urlApi;\n\tpublic mensagens: Array<MensagemDto>;\n\tpublic formGroup: FormGroup;\n\tprivate outroUsuarioDoChat: string;\n\n\tconstructor(private activateRouter: ActivatedRoute,\n\t\tprivate userAuthService: UserAuthenticateService,\n\t\tprivate mensagemService: MensagemService,\n\t\tprivate formBuilder: FormBuilder) { }\n\n\tngOnInit(): void {\n\t\tthis.usuarioAuthenticadoUsername = this.userAuthService.pegarUsernameUsuarioAutenticado();\n\t\tthis.activateRouter.params\n\t\t\t.subscribe((params => {\n\t\t\t\tconst username = params['username'];\n\t\t\t\tthis.outroUsuarioDoChat = username;\n\t\t\t\tthis.mensagemService.buscarMensagensComOUsuario(username)\n\t\t\t\t\t.pipe(tap(mensagens => this.mensagens = mensagens));\n\t\t\t}));\n\t\t\tthis.formGroup = this.formBuilder.group({\n\t\t\t\tmensagem: ['', [Validators.required]]\n\t\t\t});\n\t\tthis.mensagemService.escutarMensagensDoServidor()\n\t\t\t.subscribe(mensagem => this.mensagens.push(mensagem));\n\t}\n\n\tenviarMensagem(): void {\n\t\tconst mensagem = this.formGroup.get('mensagem')?.value;\n\t\tthis.mensagemService.enviarMensagem(mensagem, this.outroUsuarioDoChat);\n\t\tthis.formGroup.reset();\n\t}\n\n\terrorImage(event: Event) {\n\t\tUsuarioUtil.definirImagemDefault(event);\n\t}\n}\n","<div class=\"card-chat\">\n\t<div class=\"chat-com-usuarios\">\n\t\t<div class=\"card-topo\">\n\t\t\t<h3>Chats abertos</h3>\n\t\t</div>\n\t\t<div class=\"chats\">\n\t\t\t<rs-spinnerloading [elementoAguardado]=\"mensagens$ | async\"></rs-spinnerloading>\n\t\t\t<div *ngFor=\"let mensagem of mensagens$ | async\">\n\t\t\t\t<div class=\"card\">\n\t\t\t\t\t<div *ngIf=\"mensagem.emissor !== usuarioAuthenticadoUsername\"\n\t\t\t\t\t\tclass=\"d-flex flex-row espaco-msg mansagem-outro-usuario\">\n\t\t\t\t\t\t<div class=\"chat ml-2 p-3\">{{mensagem.mensagem}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"mensagem.emissor === usuarioAuthenticadoUsername\"\n\t\t\t\t\t\tclass=\"d-flex flex-row espaco-msg mensagem-usuario-autenticado\">\n\t\t\t\t\t\t<div class=\"bg-white mr-2 p-3\"><span class=\"text-muted\">{{mensagem.mensagem}}</span></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"flex-grow-0 py-3 px-4 border-top enviar-mensagens\">\n\t\t\t\t<form [formGroup]=\"formGroup\" class=\"input-group\" (submit)=\"enviarMensagem()\">\n\t\t\t\t\t<input formControlName=\"mensagem\" type=\"text\" class=\"form-control\" placeholder=\"Digite uma mensagem\">\n\t\t\t\t\t<button [disabled]=\"formGroup.invalid\" type=\"submit\" class=\"btn btn-primary\">Enviar</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>"]},"metadata":{},"sourceType":"module"}